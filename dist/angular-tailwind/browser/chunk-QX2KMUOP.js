import{a as Q}from"./chunk-D5HNI4PZ.js";import{a as J,b as K}from"./chunk-72ELOMN6.js";import"./chunk-I5OUGAOQ.js";import{a as z}from"./chunk-5HHLPE7X.js";import{a as w}from"./chunk-CHEZGLLC.js";import"./chunk-KRVA37OW.js";import"./chunk-T6U4U4OU.js";import{a as H,b as U}from"./chunk-GDVJ7YX6.js";import{b as $}from"./chunk-YO5MP22C.js";import{a as G,b as q}from"./chunk-4PLA5JDF.js";import{c as S,d as j,e as L,h as R,i as k,j as O,k as B,m as V}from"./chunk-6AQPRJKU.js";import"./chunk-EEUREV7G.js";import{B as g,Ca as E,Ea as c,Fa as C,H as I,I as u,Ib as N,Kb as P,Nb as _,O as T,P as D,Pa as h,Ra as b,Xa as x,Ya as v,ba as r,ca as p,ka as F,ma as d,s as M,ub as A,wa as s,xa as l,ya as f}from"./chunk-DSA3EB6K.js";var Y=()=>["id","display_name"],Z=()=>["Id","Display Name"];function ee(n,e){if(n&1){let t=E();s(0,"div",6)(1,"form",11),c("ngSubmit",function(){T(t);let o=C();return D(o.onSubmit())}),s(2,"div",12),f(3,"ng-select",13),l(),s(4,"div"),f(5,"app-input",14),l()()()}if(n&2){let t=C();r(),d("formGroup",t.form),r(2),d("dropdownList",t.langTypeList)("selectedItems",t.selectedItems)("singleSelection",!0)}}function te(n,e){n&1&&(s(0,"div",15)(1,"p",16),h(2,"Are you sure you want to delete this configuration?"),l()())}var a=class n{constructor(e,t,i,o,m,ne){this.route=e;this.fb=t;this.router=i;this.languageService=o;this.configService=m;this.toast=ne}form;entityType;entityData;isEditMode=!1;isDeleteMode=!1;isEditId;configData;entityId=null;langTypeList=[];selectedItems=[];tableData=[];isModalOpen=!1;modalTitle="";modalContent="'This is some important information inside the modal.'";modalButtonText="Submit";pagination={start:1,end:10,total:100,pages:[1,2,3,4,5],currentPage:1};apiCalled=!1;ngOnInit(){this.route.data.subscribe(e=>{this.entityType=e?.type,this.entityType?this.getApi():console.error("Entity Type is not defined")}),this.langTypeList=[{item_id:1,item_text:"Arabic"},{item_id:2,item_text:"English"}],this.form=this.fb.group({language:["",S.required],displayName:["",S.required]}),this.route.paramMap.subscribe(e=>{this.entityId=e.get("id"),this.entityId&&!this.apiCalled&&(this.isEditMode=!0,this.apiCalled=!0)})}openModal(e,t){this.isModalOpen=!0;let i={Add:"Add",Edit:"Edit",Delete:"Delete"};this.modalTitle=i[t]||"Title",!!e?(this.isEditMode=!0,this.isDeleteMode=!1,this.form.patchValue({id:e.id,language:e.language==="ar"?"Arabic":"English",displayName:e.display_name})):(this.modalTitle==="Add"?(this.isEditMode=!1,this.isDeleteMode=!1):(this.isEditMode=!1,this.isDeleteMode=!0),this.form.reset())}closeModal(){this.isModalOpen=!1}onConfirm(){console.log("Modal confirmed"),this.closeModal()}getApi(){if(!this.entityType){console.error("Entity type is not defined!");return}this.languageService.currentLang$.pipe(M(1)).subscribe(e=>{this.configService.getConfig(this.entityType,e).subscribe(t=>{this.configData=t.results,this.transformDataForTable(this.configData),console.log("API response:",this.configData)},t=>{console.error("Error fetching config:",t)})})}handleAction(e){e.action==="edit"?(this.openModal(e.rowData,"Edit"),this.isEditId=e.rowData.id,console.log(e.action)):e.action==="delete"&&(this.openModal("","Delete"),this.isEditId=e.rowData.id)}editRow(e){console.log("Edit row:",e),this.form.patchValue({id:e.id,language:e.language==="ar"?"Arabic":"English",displayName:e.display_name})}transformDataForTable(e){console.log(e),this.tableData=e.map(t=>({id:t.id,display_name:t.display_name})),this.pagination.total=this.tableData.length,this.updatePagination()}updatePagination(){let e=Math.ceil(this.pagination.total/10);this.pagination.pages=Array.from({length:e},(o,m)=>m+1);let t=(this.pagination.currentPage-1)*10,i=this.pagination.currentPage*10;this.pagination.start=t+1,this.pagination.end=i>this.pagination.total?this.pagination.total:i,this.tableData=this.tableData.slice(t,i)}onPageChange(e){this.pagination.currentPage=e,this.updatePagination()}onNextPage(){this.pagination.currentPage<this.pagination.pages.length&&(this.pagination.currentPage++,this.updatePagination())}onPreviousPage(){this.pagination.currentPage>1&&(this.pagination.currentPage--,this.updatePagination())}handleSelectionChange(e){this.selectedItems=e}onDelete(){this.languageService.currentLang$.subscribe(e=>{this.configService.deleteConfig(this.entityType,this.isEditId,e).subscribe(t=>{this.toast.success("Deleted successfully!"),this.closeModal(),this.apiCalled=!1,this.getApi()},t=>{this.toast.error("Delete Failed!")})})}onSubmit(){if(this.form.valid){let e=this.form.value,t={translations:[{language:"ar",display_name:e.displayName},{language:e.language[0].item_text==="Arabic"?"ar":"en",display_name:e.displayName}]};this.isEditMode?this.languageService.currentLang$.subscribe(i=>{this.configService.updateConfig(this.entityType,this.isEditId,t,i).subscribe(o=>{this.toast.success("Updated successfully!"),this.closeModal(),this.apiCalled=!1,this.getApi()},o=>{this.toast.error("Update Failed!")})}):this.languageService.currentLang$.subscribe(i=>{this.configService.createConfig(this.entityType,t,i).subscribe(o=>{this.toast.success(`${this.entityType} Created successfully!`),this.closeModal(),this.apiCalled=!1,this.getApi()},o=>{this.toast.error("Creation Failed!")})})}}static \u0275fac=function(t){return new(t||n)(p(N),p(B),p(P),p(w),p(Q),p(z))};static \u0275cmp=I({type:n,selectors:[["app-config-form"]],standalone:!0,features:[x],decls:13,vars:16,consts:[[1,"flex","flex-col","gap-5"],[1,"w-[100%]","flex","justify-between"],[1,"text-2xl","font-semibold","text-gray-700","capitalize"],[1,"text-white","rounded-lg",3,"click"],[1,"flex","items-center","gap-2","capitalize"],["src","assets/icons/heroicons/outline/plus.svg",1,"w-6","h-6","inline-flex"],[1,"w-[100%]"],[3,"onActionClick","pageChange","tableHeaders","tableColumn","tableData","showCheckboxes","showPagination","pagination"],[3,"close","confirm","isOpen","title","content","buttonText"],["class","w-[100%]",4,"ngIf"],["class","space-y-4 py-5 text-center",4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"my-5"],["label","Language","formControlName","language","placeholder","Choose language","onSelectionChange","handleSelectionChange($event)",3,"dropdownList","selectedItems","singleSelection"],["formControlName","displayName","classNames","border-[#EFF0F6] min-h-[50px] p-2 rounded text-[16px]","placeholder","Enter name","label","displayName"],[1,"space-y-4","py-5","text-center"],[1,"text-lg","text-gray-700"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),h(3),l(),s(4,"app-button",3),c("click",function(){return i.openModal("","Add")}),s(5,"div",4),f(6,"svg-icon",5),h(7),l()()(),s(8,"div",6)(9,"app-data-table",7),c("onActionClick",function(m){return i.handleAction(m)})("pageChange",function(m){return i.onPageChange(m)}),l()()(),s(10,"app-modal",8),c("close",function(){return i.closeModal()})("confirm",function(){return i.isDeleteMode?i.onDelete():i.onSubmit()}),F(11,ee,6,4,"div",9)(12,te,3,0,"div",10),l()),t&2&&(r(3),b(" ",i.entityType," "),r(4),b(" Add ",i.entityType," "),r(2),d("tableHeaders",v(14,Y))("tableColumn",v(15,Z))("tableData",i.tableData)("showCheckboxes",!0)("showPagination",!0)("pagination",i.pagination),r(),d("isOpen",i.isModalOpen)("title",i.modalTitle)("content",i.modalContent)("buttonText",i.modalButtonText),r(),d("ngIf",!i.isDeleteMode),r(),d("ngIf",i.isDeleteMode))},dependencies:[V,R,j,L,k,O,A,$,U,H,G,q,J,K]})};var ie=[{path:"job-types",component:a,data:{type:"job-types"}},{path:"shift-timings",component:a,data:{type:"shift-timings"}},{path:"id-types",component:a,data:{type:"id-types"}},{path:"academic-qualifications",component:a,data:{type:"academic-qualifications"}},{path:"language-preference",component:a,data:{type:"language-preference"}},{path:"language-levels",component:a,data:{type:"language-levels"}},{path:"clothes-sizes",component:a,data:{type:"clothes-sizes"}},{path:"doc-types",component:a,data:{type:"doc-types"}},{path:"availabilities",component:a,data:{type:"availabilities"}},{path:"rating-types",component:a,data:{type:"rating-types"}}],y=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=u({type:n});static \u0275inj=g({imports:[_.forChild(ie),_]})};var X=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=u({type:n});static \u0275inj=g({imports:[y]})};export{X as ConfigModule};
